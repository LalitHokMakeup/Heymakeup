<div class="product-card {% if card_margin %} mx-1 mx-md-3{% else %} mx-auto {% endif  %}">
    <a href="{{ product.url }}">
        <div class="product-image p-0">
            <div class="tags">
              {% for tags in product.tags %}
              {% if tags contains 'label' %}
                  <p class="tag mb-1" style=" color: {{ tags | split: '_' | slice:4}};background-color: {{ tags | split: '_' | slice:3}}" > {{ tags | split: '_' | slice: 2 }}</p>
              {% endif %}
            {% endfor %}
            </div>
            {% if product.images.size > 1 %}
            {%- assign img_url = product.featured_image -%}
            {%- assign img_url_1 = product.images[0].src -%}
            {%- assign img_url_2 = product.images[1].src -%}
            <img loading="lazy" class="img-fluid product-img-1 " src="{{ img_url_1 | img_url: 'master' }}"
                data-src="{{ img_url_1 }}" data-sizes="auto" alt="{{ product.images[0].alt }}">
            <img loading="lazy" class="product-img-2 img-fluid" src="{{ img_url_2 | img_url: 'master' }}"
                data-src="{{ img_url_2 }}" data-sizes="auto" alt="{{ product.images[1].alt }}">
            {% else %}
            <img loading="lazy" class="img-fluid" src="{{ img_url | img_url: 'master' }}" alt="{{ product.title }}"
                title="{{ product.title }}">
            {% endif %}
            <span class="fav">
                <div class="wishlist-engine" data-product_id="{{  product.id }}"
                    data-variant_id="{{ product.selected_or_first_available_variant.id }}" data-full_button="false"
                    data-css="true"></div>
                <!-- <div class="wishlist-Icon d_cent"
                    onclick="getIndex({id:{{ product.first_available_variant.id }},mainId:{{ product.id }},vendor:'{{ product.vendor }}',imgSrc:'{{ product.featured_image | img_url:'master' }}',title:'{{ product.title }}',price:{{ product.price | divided_by: 100  }},maxPrice:{{ product.compare_at_price_max | divided_by: 100 }},productSize:{{ product.variants.size }}, handle: '{{ product.handle }}', inventory:'{{ product.first_available_variant.inventory_quantity }}',color:'{{product.first_available_variant.option1 }}'},this)">
                    <svg class="heart_icon {{ section.id | remove:" -"}}-{{ forloop.index0 }} "
              xmlns=" http://www.w3.org/2000/svg" width="27" height="24" viewBox="0 0 27 24" fill="none">
                        <path
                            d="M3.75998 13.3488L12.9866 22.1496C13.3133 22.4612 13.4766 22.617 13.6769 22.617C13.8771 22.617 14.0404 22.4612 14.3671 22.1496L23.5937 13.3488C26.1137 10.9451 26.4208 7.03006 24.3064 4.2629L23.8495 3.66495C21.2938 0.320319 16.1023 0.875513 14.3117 4.68494C14.0591 5.22237 13.2946 5.22237 13.042 4.68494C11.2514 0.875513 6.05989 0.320323 3.50424 3.66495L3.04734 4.26291C0.932938 7.03006 1.24001 10.9451 3.75998 13.3488Z"
                            stroke="#404184" stroke-width="2" />
                    </svg>
                </div> -->
            </span>
        </div>
    </a>
    <div class="product-details">
        <div class="">
            <p class="mb-0 product-brand">{{ product.vendor }}</p>
            <p class="mb-0 product-title">{{ product.title }}</p>
        </div>
        <div class="">
            <span class="rating">
                <img src="https://cdn.shopify.com/s/files/1/0673/6396/3172/files/Star_1.svg?v=1692598346"
                    alt="Star Icons"><img
                    src="https://cdn.shopify.com/s/files/1/0673/6396/3172/files/Star_1.svg?v=1692598346"
                    alt="Star Icons"><img
                    src="https://cdn.shopify.com/s/files/1/0673/6396/3172/files/Star_1.svg?v=1692598346"
                    alt="Star Icons"><img
                    src="https://cdn.shopify.com/s/files/1/0673/6396/3172/files/Star_1.svg?v=1692598346"
                    alt="Star Icons"><img
                    src="https://cdn.shopify.com/s/files/1/0673/6396/3172/files/Star_1.svg?v=1692598346"
                    alt="Star Icons">
            </span>
            <div class="product-price mb-0">
                {% assign first_availablevariant = product.selected_or_first_available_variant %}
                <span>
                    <span class="selling-price">{{ first_availablevariant.price | money_without_trailing_zeros }}</span>
                    <span class="old-price">
                        {% if first_availablevariant.compare_at_price > first_availablevariant.price %}
                        {{ first_availablevariant.compare_at_price | money_without_trailing_zeros -}}
                        {% endif %}
                    </span>
                    <span class="discount">
                        {% if first_availablevariant.compare_at_price > first_availablevariant.price %}
                        {{- first_availablevariant.compare_at_price
                        | minus: first_availablevariant.price
                        | times: 100.0
                        | divided_by: first_availablevariant.compare_at_price
                        | money_without_currency
                        | times: 100
                        | remove: '.0'
                        -}}
                        % Off
                    {% endif %}
                    </span>
                </span>
            </div>
            {% if show_button %}
            <div class="shades">
                {% if product.available and product.variants.size > 1 %}
                {% for variant in product.variants limit: 3 %}
                <span class="shade"
                    style=" {% if product.variants[forloop.index0].metafields.custom.colour != blank %}
                  background-color:{{ product.variants[forloop.index0].metafields.custom.colour }} !important;
                {% else %}
                     background-image: url('{{ variant.featured_image | img_url: 'master' }}'); background-size: contain; {% endif %} "></span>
                {% endfor %}
                {% if product.variants.size > 3 %}
                {% assign product_count = product.variants.size | minus: 3 %}
                <span class="more-shade">+{{ product_count | t }}</span>
                {% endif %}
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% if show_button %}
        <div data-quickviewslide="open" data-quickviewID="{{ product.id }}" data-sectionID="{{ sectionId }}">
            <button class="select-shade">
                {% if product.available and product.variants.size > 1 %}
                Select Shade
                {% else %}
                Add To Bag
                {% endif %}
            </button>
        </div>
        {% endif %}
    </div>
</div>